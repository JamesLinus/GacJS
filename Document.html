<!DOCTYPE html>
<html>
<head>
    <title>Document</title>
    <link rel="stylesheet" href="./Doc/Document.css" />
    <link rel="stylesheet" href="./Doc/TreeView.css" />
    <script src="./Script/Package.js"></script>
    <script src="./Script/Class.js"></script>
    <script src="./Script/Test.js"></script>
    <script src="./Script/Html/Navigation.js"></script>
    <script src="./Script/Html/Razor.js"></script>
    <script src="./Doc/TreeView.js"></script>
    <script src="./Doc/Delay.js"></script>
    <script src="./Doc/Resource.js"></script>
    <script src="./Doc/Document.js"></script>
</head>
<body>
    <script>
        eval(Packages.Inject(["Test"]));
    </script>
    <!-- Task.js -->
    <script>
        TestCase("write a result to a not evaluated delay should success", function () {
            eval(Packages.Inject(["Doc.Delay"]));

            var x = CreateDelay();
            x.promise.SetResult(100);
            Assert(x.future.GetResult() === 100);
        })
    </script>
    <script>
        TestCase("write a result to an evaluated delay should success", function () {
            eval(Packages.Inject(["Doc.Delay"]));

            var x = CreateDelay();
            x.promise.SetResult(100);
            try {
                x.promise.SetResult(200);
                Assert(false);
            }
            catch (ex) {
                Assert(x.future.GetResult() === 100);
            }
        })
    </script>
    <!-- Summary -->
    <script>
        SummaryTest();
    </script>
</body>
</html>
